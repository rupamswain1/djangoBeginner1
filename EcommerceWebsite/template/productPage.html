{% extends 'base.html' %}
{% load static %}

{% block title %}
    {{product.product_name}}
{% endblock %}

{% block body %}
    <div class='container my-4'>
        <div class="row">        
            <div class="col-md-4">
                <div class='row'>
                    <img src=/media/{{product.product_image}}>
                </div>
               
                <div class='row'>
                    <button type="button" class="btn btn-warning mx-3">Buy Now</button>
                    <button type="button" class="btn btn-primary">Add to Cart</button>
                </div>

             </div>
        <div class='col-md-8'>
            <h1>{{product.product_name}}</h1>
            <h2><b>&#x20B9 {{product.product_price}}</b></h2>
            <h3>Description:</h3>
            <p>{{product.product_description}}</p>

        </div>
        </div>
    </div>


{% endblock %}
{% block js %}
<script>
    if(localStorage.getItem('cart')==null){
      var cart={};
    }
    else{
      cart=JSON.parse(localStorage.getItem('cart'));
    }
    $('.cart').click(function(){
      console.log('clicked');
      var idstr=this.id.toString();
      console.log(idstr)
      if (cart[idstr]!=undefined){
      cart[idstr]=cart[idstr]+1;
      }
      else{
        cart[idstr]=1;
      }
      console.log(cart);
      localStorage.setItem('cart',JSON.stringify(cart))
     
      
      
    }
    );
    document.getElementById('cart').innerHTML=Object.keys(cart).length
    $('#popCart').popover()
    document.getElementById('popCart').setAttribute('data-content',Object.keys(cart).length+' Items in your Cart')
  </script>
{% endblock %}